# Solution
- The exchange mechanic is how we solved the two issues, it allows distribution to node owners and helps to avoid gas wars. 
- Creating an artist tool to allow artists to map and upload the base model files
- Creating a trait generator that creates a json of 8888 unique VOX with all their traits and colors. The trait generator takes in inputs from excel and the VOX artist tool in order to create classes that are unique and true to the original content
- Feeding all of this through the assembler (along with other updates) to create the vox files themselves 
- Rendering these files through blender

# Project Structure

The files are grouped into their own project folders
  - Contracts --> this folder contains all smart contracts
  - Test --> this folder contain all the unit testing using mocha with hardhat
  - Deploy --> this folder contain all deployment files, utilizing a hardhat plugin, 'hardhat-deploy'
  - Deployment --> this folder is generated by hardhat-deploy plugin and has all the last deployment info.


# Smart Contract
  The main contract is Fuzzles.sol was originally copied from Mirandus contract and was tweaked to match the project need. This contract has some dependencies on the 2 mocked contracts:
  - MockTownStar.sol
  - MockVRFCoordinator.sol.

# Diagram
![images](./smartcontract-diagram.png)


# Design Pattern
- Access Control by inheriting from the ownable contract.
- Pausable
- Oracle utilization for a veriable Randomness Function (VRF).

# Testing
- localhost --> npx hardhat test ./test/Fuzzles.spec.ts   
- Rinkeby --> npx hardhat test ./test/Fuzzles.spec.ts  --network rinkeby

# Local Oracle
Local VRF oracle was created to enable the local testing. There are 2 components that were created to support this. 
1. function setLocalVRFChainlinkOracle() in Fuzzles.spec.ts
2. MockVRFCoordinator.sol

# Deployment Script
- localhost --> npx hardhat deploy
- Rinkeby --> npx hardhat deploy --network rinkeby
- localhost --> npx hardhat deploy  --network mainet

#Deployment cli
npx hardhat deploy --network rinkeby --tags Fuzzles

# Deployment Checklist
A. Meta Data (Jonathan)


1. Coordinate the final metadata deployment.
B. Smart contract (Adam, Erik Or Smitty)
----------------------------------------
2. Talk to Adam about getting the final provenance number and add it in the smart contract.
3. Make sure the base token uri address in smart contract is correct
4. Compile the contracts "npx hardhat compile"
5. Run Testing locally:
   npx hardhat node
   npx hardhat test ./test/Fuzzles.spec.ts
6. Make sure the .env file contain the correct data for the following keys below:
   1. process.env.MAINNET_PRIVATE_KEY
   2. process.env.ETHERSCAN_API_KEY
   3. townstar contract inside the namedAccounts.
7. Make sure deploy.json contains the right settings especially the salestarttimestamp.
    Sample Setting
   "1": {
    "vrfCoordinator" : "0x271682DEB8C4E0901D1a1550aD2e64D568E69909",
    "vrfKeyhash": "0x9fe0eebf5e446e3c998ec9bb19951541aee00bb90ea201ae456421a2ded86805",
    "vrfSubscriptionId": 29,
    "saleStartTimestamp": "1647720000",
    "boxTokenId": "0x02dc00000000000000000000000000000000"
  },
8. deploy to mainnet "npx hardhat deploy --network mainnet
9. run the contract verification script. This verify script will be generated upon deployment. Just copy, paste and run.
10. Go to chain-link, and add the consumer in the vrf link with the new Fuzzle address.
11. Make sure there is enough LINK currently in the subscription.
C. Front End (Erik or Smitty)
----------------------------------
11. Make sure the new contract address, box token address, and box token id (convert from hex to decimal) are added to the sanity CMS front end.
D. POST DEPLOYMENT  (Everyone)
-----------------------------------
12. Make sure the fulfillment count is increased after the minting.
13. Verify the first 10 minted items on rinkeby make sure they all have been successfully.
14. Setup the Opensea Collection. Make sure all properties in the open sea collection has been setup properly (royalty, logo, desc etc)


# Deployed Contracts
1. Rinkeby https://rinkeby.etherscan.io/address/0xb410f7522cE2f9A01BFAe479b211a87cf7711F92#code
2. Mainnet https://etherscan.io/address/0x338BE3d8D0209815601e72F7A04Ac7F37d61564b#code
